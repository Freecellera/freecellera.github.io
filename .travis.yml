language: python
python:
  - "2.7"
before_install:
  - git config user.name travis-ci
  - mkdir -p .travis
  - openssl aes-256-cbc -K $encrypted_0e798ea70671_key -iv $encrypted_0e798ea70671_iv -in .travis.id_rsa.enc -out .travis/id_rsa -d
  - chmod 600 .travis/id_rsa
  - eval `ssh-agent -s`
  - ssh-add .travis/id_rsa
install:
  - pip install pelican ghp-import markdown
script:
  - git remote remove origin
  - git remote add origin git@github.com:Freecellera/freecellera.github.io.git
  - git fetch origin
  - make publish
  #- cp content/extra/* output
  - ghp-import -m "Automatic Generate Pelican site" -b master output
  - git push -f origin master
notifications:
  email: false
branches:
  only:
  - sources
